{"version":3,"file":"form-elements-dependency.js","sources":["../src/form-elements-dependency.js"],"sourcesContent":["import $ from 'jquery';\n\n$.fn.formElementsDependency = function(userOptions) {\n\n\tlet opt = {};\n\tlet elementsObj = {};\n\n\tconst defaultOptions = {\n\t\tdependencyName: 'dependency',\n\t\telementSeparator: ';',\n\t\tdataSeparator: ':',\n\t\tvalueSeparator: '|',\n\t\tinactiveClassName: 'inactive',\n\t\tactiveClassName: 'active',\n\t\tdisableElement: false\n\t};\n\n\topt = $.extend({}, defaultOptions, userOptions);\n\n\treturn this.each(function(index, el) {\n\n\t\tlet self = $(this);\n\n\t\tself.addClass(opt.inactiveClassName);\n\n\t\tlet dependentString = $(el).data(opt.dependencyName);\n\t\tlet elementsData = dependentString.split(opt.elementSeparator);\n\n\t\t$(elementsData).each(function(index, el) {\n\t\t\t\t\n\t\t\tlet elementData = el.split(opt.dataSeparator);\n\t\t\tlet element = elementData[0];\n\t\t\tlet data = elementData[1];\n\t\t\tlet values = data.split(opt.valueSeparator);\n\n\t\t\telementsObj[element] = values;\n\n\t\t\t$(element).on('change keyup', function() {\n\t\t\t\tcheckDependency(self);\n\t\t\t});\n\n\t\t});\n\n\t\tcheckDependency(self);\n\n\t});\n\n\tfunction checkDependency(self) {\n\n\t\tlet active = checkActive();\n\n\t\tself.toggleClass(opt.inactiveClassName, !active);\n\t\tself.toggleClass(opt.activeClassName, active);\n\n\t\tif(opt.disableElement) self.prop('disabled', !active);\n\n\t}\n\n\tfunction checkActive() {\n\t\tlet active = false;\n\n\t\t$.each(elementsObj, function(index, values) {\n\t\t\tlet value = $(index).val();\n\t\t\tif(Array.isArray(value)) {\n\t\t\t\t$(value).each(function(index, val) {\n\t\t\t\t\tif(checkValues(values, val)) active = true;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif(checkValues(values, value)) active = true;\n\t\t\t}\n\t\t});\n\n\t\treturn active;\n\t}\n\n\tfunction checkValues(values, value) {\n\t\tif(value && values.includes('*')) {\n\t\t\treturn true;\n\t\t} else if(values.includes(value)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n};"],"names":["$","fn","formElementsDependency","userOptions","opt","elementsObj","defaultOptions","dependencyName","elementSeparator","dataSeparator","valueSeparator","inactiveClassName","activeClassName","disableElement","extend","each","index","el","self","addClass","dependentString","data","elementsData","split","elementData","element","values","on","checkDependency","active","checkActive","toggleClass","prop","value","val","Array","isArray","checkValues","includes"],"mappings":";;;;;;;;;;;;;CAEAA,EAAEC,EAAF,CAAKC,sBAAL,GAA8B,UAASC,WAAT,EAAsB;;CAEnD,KAAIC,MAAM,EAAV;CACA,KAAIC,cAAc,EAAlB;;CAEA,KAAMC,iBAAiB;CACtBC,kBAAgB,YADM;CAEtBC,oBAAkB,GAFI;CAGtBC,iBAAe,GAHO;CAItBC,kBAAgB,GAJM;CAKtBC,qBAAmB,UALG;CAMtBC,mBAAiB,QANK;CAOtBC,kBAAgB;CAPM,EAAvB;;CAUAT,OAAMJ,EAAEc,MAAF,CAAS,EAAT,EAAaR,cAAb,EAA6BH,WAA7B,CAAN;;CAEA,QAAO,KAAKY,IAAL,CAAU,UAASC,KAAT,EAAgBC,EAAhB,EAAoB;;CAEpC,MAAIC,OAAOlB,EAAE,IAAF,CAAX;;CAEAkB,OAAKC,QAAL,CAAcf,IAAIO,iBAAlB;;CAEA,MAAIS,kBAAkBpB,EAAEiB,EAAF,EAAMI,IAAN,CAAWjB,IAAIG,cAAf,CAAtB;CACA,MAAIe,eAAeF,gBAAgBG,KAAhB,CAAsBnB,IAAII,gBAA1B,CAAnB;;CAEAR,IAAEsB,YAAF,EAAgBP,IAAhB,CAAqB,UAASC,KAAT,EAAgBC,EAAhB,EAAoB;;CAExC,OAAIO,cAAcP,GAAGM,KAAH,CAASnB,IAAIK,aAAb,CAAlB;CACA,OAAIgB,UAAUD,YAAY,CAAZ,CAAd;CACA,OAAIH,OAAOG,YAAY,CAAZ,CAAX;CACA,OAAIE,SAASL,KAAKE,KAAL,CAAWnB,IAAIM,cAAf,CAAb;;CAEAL,eAAYoB,OAAZ,IAAuBC,MAAvB;;CAEA1B,KAAEyB,OAAF,EAAWE,EAAX,CAAc,cAAd,EAA8B,YAAW;CACxCC,oBAAgBV,IAAhB;CACA,IAFD;CAIA,GAbD;;CAeAU,kBAAgBV,IAAhB;CAEA,EA1BM,CAAP;;CA4BA,UAASU,eAAT,CAAyBV,IAAzB,EAA+B;;CAE9B,MAAIW,SAASC,aAAb;;CAEAZ,OAAKa,WAAL,CAAiB3B,IAAIO,iBAArB,EAAwC,CAACkB,MAAzC;CACAX,OAAKa,WAAL,CAAiB3B,IAAIQ,eAArB,EAAsCiB,MAAtC;;CAEA,MAAGzB,IAAIS,cAAP,EAAuBK,KAAKc,IAAL,CAAU,UAAV,EAAsB,CAACH,MAAvB;CAEvB;;CAED,UAASC,WAAT,GAAuB;CACtB,MAAID,SAAS,KAAb;;CAEA7B,IAAEe,IAAF,CAAOV,WAAP,EAAoB,UAASW,KAAT,EAAgBU,MAAhB,EAAwB;CAC3C,OAAIO,QAAQjC,EAAEgB,KAAF,EAASkB,GAAT,EAAZ;CACA,OAAGC,MAAMC,OAAN,CAAcH,KAAd,CAAH,EAAyB;CACxBjC,MAAEiC,KAAF,EAASlB,IAAT,CAAc,UAASC,KAAT,EAAgBkB,GAAhB,EAAqB;CAClC,SAAGG,YAAYX,MAAZ,EAAoBQ,GAApB,CAAH,EAA6BL,SAAS,IAAT;CAC7B,KAFD;CAGA,IAJD,MAIO;CACN,QAAGQ,YAAYX,MAAZ,EAAoBO,KAApB,CAAH,EAA+BJ,SAAS,IAAT;CAC/B;CACD,GATD;;CAWA,SAAOA,MAAP;CACA;;CAED,UAASQ,WAAT,CAAqBX,MAArB,EAA6BO,KAA7B,EAAoC;CACnC,MAAGA,SAASP,OAAOY,QAAP,CAAgB,GAAhB,CAAZ,EAAkC;CACjC,UAAO,IAAP;CACA,GAFD,MAEO,IAAGZ,OAAOY,QAAP,CAAgBL,KAAhB,CAAH,EAA2B;CACjC,UAAO,IAAP;CACA;CACD,SAAO,KAAP;CACA;CAED,CAlFD;;;;"}