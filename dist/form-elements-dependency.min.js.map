{"version":3,"sources":["../src/form-elements-dependency.js"],"names":["fn","formElementsDependency","userOptions","opt","elementsObj","$","extend","dependencyName","elementSeparator","dataSeparator","valueSeparator","inactiveClassName","activeClassName","disableElement","this","each","index","el","self","addClass","elementsData","data","split","elementData","element","values","on","checkDependency","active","value","val","Array","isArray","checkValues","toggleClass","prop","includes"],"mappings":";;;;;8OAEEA,GAAGC,uBAAyB,SAASC,GAEtC,IAAIC,EAAM,GACNC,EAAc,GAclB,OAFAD,EAAME,EAAEC,OAAO,GAVQ,CACtBC,eAAgB,aAChBC,iBAAkB,IAClBC,cAAe,IACfC,eAAgB,IAChBC,kBAAmB,WACnBC,gBAAiB,SACjBC,gBAAgB,GAGkBX,GAE5BY,KAAKC,KAAK,SAASC,EAAOC,GAEhC,IAAIC,EAAOb,EAAES,MAEbI,EAAKC,SAAShB,EAAIQ,mBAElB,IACIS,EADkBf,EAAEY,GAAII,KAAKlB,EAAII,gBACFe,MAAMnB,EAAIK,kBAE7CH,EAAEe,GAAcL,KAAK,SAASC,EAAOC,GAEpC,IAAIM,EAAcN,EAAGK,MAAMnB,EAAIM,eAC3Be,EAAUD,EAAY,GAEtBE,EADOF,EAAY,GACLD,MAAMnB,EAAIO,gBAE5BN,EAAYoB,GAAWC,EAEvBpB,EAAEmB,GAASE,GAAG,eAAgB,WAC7BC,EAAgBT,OAKlBS,EAAgBT,KAIjB,SAASS,EAAgBT,GAExB,IAUIU,EAVAA,GAUAA,GAAS,EAEbvB,EAAEU,KAAKX,EAAa,SAASY,EAAOS,GACnC,IAAII,EAAQxB,EAAEW,GAAOc,MAClBC,MAAMC,QAAQH,GAChBxB,EAAEwB,GAAOd,KAAK,SAASC,EAAOc,GAC1BG,EAAYR,EAAQK,KAAMF,GAAS,KAGpCK,EAAYR,EAAQI,KAAQD,GAAS,KAInCA,GArBPV,EAAKgB,YAAY/B,EAAIQ,mBAAoBiB,GACzCV,EAAKgB,YAAY/B,EAAIS,gBAAiBgB,GAEnCzB,EAAIU,gBAAgBK,EAAKiB,KAAK,YAAaP,GAqB/C,SAASK,EAAYR,EAAQI,GAC5B,SAAGA,IAASJ,EAAOW,SAAS,SAElBX,EAAOW,SAASP","sourcesContent":["import $ from 'jquery';\n\n$.fn.formElementsDependency = function(userOptions) {\n\n\tlet opt = {};\n\tlet elementsObj = {};\n\n\tconst defaultOptions = {\n\t\tdependencyName: 'dependency',\n\t\telementSeparator: ';',\n\t\tdataSeparator: ':',\n\t\tvalueSeparator: '|',\n\t\tinactiveClassName: 'inactive',\n\t\tactiveClassName: 'active',\n\t\tdisableElement: false\n\t};\n\n\topt = $.extend({}, defaultOptions, userOptions);\n\n\treturn this.each(function(index, el) {\n\n\t\tlet self = $(this);\n\n\t\tself.addClass(opt.inactiveClassName);\n\n\t\tlet dependentString = $(el).data(opt.dependencyName);\n\t\tlet elementsData = dependentString.split(opt.elementSeparator);\n\n\t\t$(elementsData).each(function(index, el) {\n\t\t\t\t\n\t\t\tlet elementData = el.split(opt.dataSeparator);\n\t\t\tlet element = elementData[0];\n\t\t\tlet data = elementData[1];\n\t\t\tlet values = data.split(opt.valueSeparator);\n\n\t\t\telementsObj[element] = values;\n\n\t\t\t$(element).on('change keyup', function() {\n\t\t\t\tcheckDependency(self);\n\t\t\t});\n\n\t\t});\n\n\t\tcheckDependency(self);\n\n\t});\n\n\tfunction checkDependency(self) {\n\n\t\tlet active = checkActive();\n\n\t\tself.toggleClass(opt.inactiveClassName, !active);\n\t\tself.toggleClass(opt.activeClassName, active);\n\n\t\tif(opt.disableElement) self.prop('disabled', !active);\n\n\t}\n\n\tfunction checkActive() {\n\t\tlet active = false;\n\n\t\t$.each(elementsObj, function(index, values) {\n\t\t\tlet value = $(index).val();\n\t\t\tif(Array.isArray(value)) {\n\t\t\t\t$(value).each(function(index, val) {\n\t\t\t\t\tif(checkValues(values, val)) active = true;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif(checkValues(values, value)) active = true;\n\t\t\t}\n\t\t});\n\n\t\treturn active;\n\t}\n\n\tfunction checkValues(values, value) {\n\t\tif(value && values.includes('*')) {\n\t\t\treturn true;\n\t\t} else if(values.includes(value)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n};"]}